<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Ç´„É¨„ÉºËÅ∑‰∫∫ - Curry Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Noto+Sans+JP:wght@400;900&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #3e2723;
            color: #fff;
        }

        .pixel-font {
            font-family: 'Press Start 2P', cursive;
        }

        .pot-container {
            width: 280px;
            height: 280px;
            background: #5d4037;
            border-radius: 50%;
            border: 10px solid #8d6e63;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
            overflow: hidden;
            transition: all 0.3s;
        }

        .curry-liquid {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border-radius: 50%;
            background: #ffcc80;
            /* Water/Stock initially */
            transition: background 1s ease;
            z-index: 1;
        }

        .curry-liquid.roux-added {
            background: #d84315;
        }

        /* Dark orange */
        .curry-liquid.simmering {
            background: #5d4037;
        }

        /* Deep brown */
        .curry-liquid.perfect {
            background: radial-gradient(circle, #795548 30%, #3e2723 90%);
        }

        .ingredient {
            position: absolute;
            font-size: 2rem;
            animation: fallIn 0.5s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
        }

        @keyframes fallIn {
            0% {
                transform: scale(0) translateY(-50px);
                opacity: 0;
            }

            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .bubble {
            position: absolute;
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: bubblePop 2s infinite;
            display: none;
        }

        .simmering .bubble {
            display: block;
        }

        @keyframes bubblePop {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            50% {
                opacity: 1;
            }

            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        .btn-ingredient {
            @apply w-20 h-20 rounded-xl bg-white text-gray-800 flex flex-col items-center justify-center font-bold shadow-lg transform active:scale-95 transition-all text-sm border-b-4 border-gray-300 active:border-0 active:translate-y-1;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- HUD -->
    <div class="w-full max-w-4xl flex justify-between items-center mb-8 px-4">
        <div>
            <h1 class="text-2xl md:text-4xl text-yellow-400 pixel-font mb-2 drop-shadow-md">„Ç´„É¨„ÉºËÅ∑‰∫∫</h1>
            <p class="text-xs text-orange-200">The Ultimate Curry</p>
        </div>
        <div class="text-right">
            <div class="text-xs text-gray-400 pixel-font">STEP</div>
            <div id="step-text" class="text-xl font-bold text-white pixel-font text-yellow-300">ÂÖ∑ÊùêÈÅ∏„Å≥</div>
        </div>
    </div>

    <div class="flex flex-col md:flex-row gap-8 items-center justify-center w-full max-w-5xl">

        <!-- Pot View -->
        <div class="relative order-1 md:order-2">
            <div class="pot-container mx-auto">
                <div id="liquid" class="curry-liquid flex items-center justify-center">
                    <!-- Bubbles -->
                    <div class="bubble" style="top:30%; left:40%; animation-delay:0s"></div>
                    <div class="bubble" style="top:60%; left:20%; animation-delay:0.5s"></div>
                    <div class="bubble" style="top:50%; left:70%; animation-delay:1s"></div>
                    <div class="bubble" style="top:20%; left:60%; animation-delay:1.5s"></div>
                </div>
                <!-- Ingredients Layer -->
                <div id="pot-contents" class="absolute inset-0 z-20 overflow-hidden rounded-full"></div>
            </div>

            <!-- Fire Control -->
            <div class="mt-4 flex justify-center gap-2">
                <div class="text-center">
                    <p class="text-xs text-gray-400 mb-1">ÁÅ´Âäõ (HEAT)</p>
                    <div class="flex gap-1">
                        <button onclick="setHeat('low')"
                            class="p-2 rounded bg-yellow-600 hover:bg-yellow-500 text-xs">Âº±</button>
                        <button onclick="setHeat('med')"
                            class="p-2 rounded bg-orange-600 hover:bg-orange-500 text-xs text-white">‰∏≠</button>
                        <button onclick="setHeat('high')"
                            class="p-2 rounded bg-red-600 hover:bg-red-500 text-xs text-white">Âº∑</button>
                    </div>
                </div>
            </div>

            <div id="msg"
                class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-4xl font-black text-white drop-shadow-lg opacity-0 pointer-events-none whitespace-nowrap z-50 transition-all text-center">

            </div>
        </div>

        <!-- Controls -->
        <div class="w-full max-w-sm order-2 md:order-1 bg-white/10 p-6 rounded-2xl backdrop-blur-sm">
            <h3 class="pixel-font text-yellow-400 text-xs mb-4 text-center">INGREDIENTS</h3>
            <div class="grid grid-cols-3 gap-3">
                <button onclick="addIng('meat')" class="btn-ingredient"><span>ü•©</span>ËÇâ</button>
                <button onclick="addIng('carrot')" class="btn-ingredient"><span>ü•ï</span>‰∫∫ÂèÇ</button>
                <button onclick="addIng('potato')" class="btn-ingredient"><span>ü•î</span>Ëäã</button>
                <button onclick="addIng('onion')" class="btn-ingredient"><span>üßÖ</span>ÁéâËë±</button>
                <button onclick="addIng('spice')" class="btn-ingredient"><span>üå∂Ô∏è</span>„Çπ„Éë„Ç§„Çπ</button>
                <button onclick="addIng('love')" class="btn-ingredient"><span>üíñ</span>ÊÑõÊÉÖ</button>
            </div>
        </div>

        <div class="w-full max-w-sm order-3 bg-white/10 p-6 rounded-2xl backdrop-blur-sm flex flex-col items-center">
            <h3 class="pixel-font text-yellow-400 text-xs mb-4 text-center">ACTION</h3>
            <button onclick="addRoux()" id="btn-roux"
                class="w-full py-3 bg-amber-800 text-white font-bold rounded-lg hover:bg-amber-700 transition mb-3 opacity-50 cursor-not-allowed">
                „É´„Ç¶„ÇíÂÖ•„Çå„Çã
            </button>
            <button onclick="simmer()" id="btn-simmer"
                class="w-full py-3 bg-red-700 text-white font-bold rounded-lg hover:bg-red-600 transition mb-3 opacity-50 cursor-not-allowed">
                ÁÖÆËæº„ÇÄ (SIMMER)
            </button>
            <button onclick="serve()" id="btn-serve"
                class="w-full py-4 bg-yellow-500 text-amber-900 font-bold rounded-lg hover:bg-yellow-400 transition shadow-lg pixel-font opacity-50 cursor-not-allowed">
                ÂÆåÊàê (SERVE)
            </button>
        </div>
    </div>

    <div class="mt-8">
        <a href="index.html"
            class="text-gray-400 hover:text-white transition text-xs pixel-font flex items-center gap-2">
            <span>
                << /span> HOME
        </a>
    </div>

    <script>
        const state = {
            step: 0, // 0: ingredients, 1: roux, 2: simmer, 3: serve
            ingredients: [],
            heat: 'low',
            simmerTime: 0,
            simmerInterval: null
        };

        const els = {
            step: document.getElementById('step-text'),
            liquid: document.getElementById('liquid'),
            contents: document.getElementById('pot-contents'),
            btnRoux: document.getElementById('btn-roux'),
            btnSimmer: document.getElementById('btn-simmer'),
            btnServe: document.getElementById('btn-serve'),
            msg: document.getElementById('msg')
        };

        function playSound(type) {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);

            if (type === 'plop') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(300, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.1);
            } else if (type === 'win') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(440, ctx.currentTime);
                osc.frequency.linearRampToValueAtTime(880, ctx.currentTime + 0.3);
            }

            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.1);
            osc.start(); osc.stop(ctx.currentTime + 0.1);
        }

        function addIng(type) {
            if (state.step > 0) return;
            state.ingredients.push(type);
            playSound('plop');

            const el = document.createElement('div');
            el.className = 'ingredient';
            el.innerText = type === 'meat' ? 'ü•©' : type === 'carrot' ? 'ü•ï' : type === 'potato' ? 'ü•î' : type === 'onion' ? 'üßÖ' : type === 'spice' ? 'üå∂Ô∏è' : 'üíñ';

            // Random position inside pot circle
            const r = Math.random() * 80;
            const theta = Math.random() * Math.PI * 2;
            el.style.left = (140 + r * Math.cos(theta) - 15) + 'px';
            el.style.top = (140 + r * Math.sin(theta) - 15) + 'px';
            el.style.transform = `rotate(${Math.random() * 360}deg)`;

            els.contents.appendChild(el);

            if (state.ingredients.length >= 3) {
                els.btnRoux.classList.remove('opacity-50', 'cursor-not-allowed');
                els.step.textContent = "„É´„Ç¶ÊäïÂÖ•ÂèØËÉΩ";
            }
        }

        function addRoux() {
            if (state.ingredients.length < 3 || state.step > 0) return;
            state.step = 1;
            els.liquid.classList.add('roux-added');
            els.step.textContent = "ÁÖÆËæº„ÅøÊ∫ñÂÇô";
            els.btnRoux.classList.add('opacity-50', 'cursor-not-allowed');
            els.btnSimmer.classList.remove('opacity-50', 'cursor-not-allowed');
            showMsg("„É´„Ç¶ÊäïÂÖ•ÔºÅ");
        }

        function setHeat(level) {
            state.heat = level;
            // Visual feedback for flames could go here
        }

        function simmer() {
            if (state.step !== 1) return;
            state.step = 2;
            els.liquid.classList.add('simmering');
            els.step.textContent = "ÁÖÆËæº„Åø‰∏≠...";
            els.btnSimmer.classList.add('opacity-50', 'cursor-not-allowed');

            state.simmerInterval = setInterval(() => {
                state.simmerTime += (state.heat === 'high' ? 2 : state.heat === 'med' ? 1 : 0.5);
                if (Math.random() > 0.7) playSound('plop'); // boiling sound

                if (state.simmerTime > 50) {
                    els.liquid.classList.add('perfect');
                    clearInterval(state.simmerInterval);
                    state.step = 3;
                    els.step.textContent = "ÂÆåÊàêÔºÅ";
                    els.btnServe.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }, 100);
        }

        function serve() {
            if (state.step !== 3) return;
            playSound('win');

            let msg = "ÁæéÂë≥„Åó„ÅÑ„Ç´„É¨„ÉºÔºÅ";
            if (state.ingredients.includes('love')) msg = "ÊÑõ„ÅÆ„Ç´„É¨„ÉºÔºÅ";
            if (state.ingredients.includes('spice') && state.ingredients.includes('meat')) msg = "Áµ∂ÂìÅ„Çπ„Éë„Ç§„Ç∑„Éº„Ç´„É¨„ÉºÔºÅ";

            showMsg(msg);

            setTimeout(() => location.reload(), 3000);
        }

        function showMsg(text) {
            els.msg.textContent = text;
            els.msg.style.opacity = 1;
            setTimeout(() => els.msg.style.opacity = 0, 2000);
        }
    </script>
</body>

</html>